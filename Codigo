	ORG 0X00
	CONT EQU 0x20
	BUT EQU 0x21
	W_TEMP EQU 0x22
	STATUS_TEMP EQU 0x23
	PCLATH_TEMP EQU 0x24
    GOTO SETTINGS


    ORG 0X04

    MOVWF W_TEMP 
    SWAPF STATUS,W 
    CLRF STATUS 
    MOVWF STATUS_TEMP 
    MOVF PCLATH, W 
    MOVWF PCLATH_TEMP 
    CLRF PCLATH 

    BTFSC INTCON,INTF
    COMF BUT,F ; ATIVA A PAUSA
    BTFSS BUT,0 ; PAUSA O CRONÔMETRO SE BUT0 = 1
    DECF CONT,F 
    CLRF TMR0

    MOVF PCLATH_TEMP, W 
    MOVWF PCLATH 
    SWAPF STATUS_TEMP,W 
    MOVWF STATUS 
    SWAPF W_TEMP,F 
    SWAPF W_TEMP,W 
    BCF INTCON,INTF ; ZERA A FLAG DE B0
    BCF INTCON,TMR0IF ; ZERA FLAG DO TIMER0
    RETFIE
    
SETTINGS:
    BSF INTCON,5  
    BSF INTCON,4  ;ATIVA O INTERRUPT PORTB0
    BSF STATUS,RP0
    BSF OPTION_REG,6  
    BCF OPTION_REG,5 ; ATIVA O TIMER0
    BCF OPTION_REG,3 ; COLOCA O PRESCALER NO TIMER0
    BSF OPTION_REG,2
    BSF OPTION_REG,1
    BCF OPTION_REG,0 ; COLOCA PRESCALER DE 1:128
    BCF STATUS,RP0 
    MOVLW TRISA 
    MOVWF FSR
    CLRF INDF  ;COLOCA PORTA COMO OUTPUT
    MOVLW TRISC
    MOVWF FSR
    CLRF INDF ;COLOCA PORTC COMO OUTPUT
    BSF TRISB,0 ;COLOCA PORTB0 COMO INPUT
    BSF STATUS,C
    CLRF BUT
    MOVLW 32
    MOVWF CONT    
    BSF PORTA,0
    BSF INTCON,7 

MAIN:
    BTFSC BUT,0 ; CONFERE SE O PROGRAMA ESTÁ PAUSADO(1) OU NÃO(0)
    GOTO MAIN
    DECFSZ CONT,W
    GOTO MAIN
    MOVLW 32
    MOVWF CONT    
    RLF PORTC,F
    GOTO MAIN
